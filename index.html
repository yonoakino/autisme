<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skrining Autisme Anak - Dini</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #6366f1; /* Indigo-500 for Dark Mode primary */
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a; /* Slate-900 (Dark Background) */
            color: #f9fafb; /* Gray-50 (Light Text) */
            transition: none; /* Hilangkan transisi warna tema */
        }
        
        /* Gaya Kartu dan Elemen di Tema Gelap */
        .dark-card {
            background-color: #1e293b; /* Slate-800 */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
        }
        .dark-accent-button { 
            background-color: var(--primary-color); 
            color: white; 
        }
        .dark-accent-button:hover { 
            background-color: #4f46e5; /* Indigo-600 hover */
        }
        .text-main-accent {
            color: #6366f1; /* Indigo-500 for headlines */
        }
        
        /* Styling untuk opsi jawaban yang dipilih */
        .question-option input[type="radio"]:checked + label {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        .question-option label {
            border-color: #475569; /* Slate-600 border for options */
            background-color: #334155; /* Slate-700 for options background */
            color: #f9fafb;
        }
        .question-option label:hover {
            background-color: #475569; /* Slate-600 hover for options */
        }
    </style>
</head>
<body class="transition-colors duration-500">
    <div class="container mx-auto p-4 md:p-8 max-w-4xl">
        
        <!-- Header -->
        <header class="flex justify-between items-start mb-8">
            <div>
                <h1 class="text-3xl font-extrabold text-main-accent">
                    Skrining Dini Autisme
                </h1>
                <!-- Tulisan kecil di bawah judul utama -->
                <p class="text-xs text-gray-400 mt-1">
                    Created by Yono
                </p>
            </div>
            
            <!-- Tombol Theme Toggle Dihapus -->
        </header>

        <!-- Disclaimer Section -->
        <div id="disclaimer" class="p-4 mb-6 rounded-lg bg-yellow-900 border border-yellow-700 text-yellow-200">
            <p class="font-semibold mb-2">PENTING: Alat Informasi, Bukan Diagnosis</p>
            <p class="text-sm">Kuesioner ini didasarkan pada prinsip skrining umum dan hanya dimaksudkan sebagai alat informasi dan pendidikan. Hasil yang diperoleh bukanlah diagnosis klinis. Selalu konsultasikan dengan profesional kesehatan atau perkembangan anak untuk evaluasi yang akurat.</p>
        </div>

        <!-- Screening Form -->
        <div id="screeningForm" class="dark-card p-6 rounded-xl shadow-2xl">
            <h2 class="text-2xl font-bold mb-6 text-gray-100">Jawablah Berdasarkan Perilaku Anak Anda</h2>
            
            <!-- Container for single question -->
            <div id="questionsContainer" class="min-h-[150px] flex items-center justify-center">
                <!-- Single question will be injected here -->
            </div>
            
            <!-- Navigation Buttons -->
            <div class="flex justify-between items-center mt-8">
                <button id="prevButton" onclick="goToPrevious()" 
                        class="bg-gray-700 text-gray-200 font-bold p-3 rounded-lg shadow-md hover:shadow-lg transition duration-300 hidden">
                    <!-- Ikon panah kiri (besar) -->
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                    </svg>
                </button>

                <div class="text-sm font-medium text-gray-400" id="questionCounter"></div>

                <!-- Next or Submit Button -->
                <button id="nextButton" onclick="goToNext()" 
                        class="dark-accent-button font-bold p-3 rounded-lg shadow-md hover:shadow-lg transition duration-300">
                    <!-- Ikon panah kanan (besar) -->
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
                    </svg>
                </button>
                
                <button id="submitButton" onclick="calculateScore()" class="dark-accent-button font-bold py-3 px-4 rounded-lg shadow-md hover:shadow-lg transition duration-300 hidden">
                    Lihat Hasil Skrining
                </button>
            </div>
        </div>

        <!-- Result Display -->
        <div id="resultContainer" class="hidden dark-card p-8 rounded-xl shadow-2xl mt-8">
            <h2 class="text-3xl font-bold mb-4 text-center text-gray-100">Hasil Skrining</h2>
            <div id="scoreDisplay" class="text-center text-4xl font-extrabold mb-6"></div>
            <div id="riskLevel" class="text-center text-2xl font-semibold p-4 rounded-lg mb-6"></div>
            <p id="recommendation" class="text-center text-lg mb-6"></p>
            
            <button onclick="resetQuiz()" class="w-full dark-accent-button font-bold py-3 px-4 rounded-lg shadow-md hover:shadow-lg transition duration-300">
                Ulangi Skrining
            </button>
        </div>

    </div>

    <!-- Floating WA Button (Muncul setelah hasil) -->
    <a id="whatsappButton" href="#" target="_blank" 
       class="fixed bottom-6 right-6 z-50 p-4 rounded-full bg-green-500 shadow-xl hover:bg-green-600 transition duration-300 hidden">
        <!-- WhatsApp Icon SVG (simplified) -->
        <svg class="w-8 h-8 text-white" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M12.0006 2.0001C6.48062 2.0001 2.00062 6.4801 2.00062 12.0001C2.00062 14.1201 2.68062 16.1201 3.96062 17.7201L2.80062 21.2001L6.32062 20.0801C7.88062 21.0801 9.80062 21.6001 12.0006 21.6001H12.0406C17.5206 21.6001 22.0006 17.1201 22.0006 12.0001C22.0006 6.4801 17.5206 2.0001 12.0006 2.0001ZM16.4806 15.6801L15.6806 16.8001C15.5206 17.0001 15.2806 17.0401 15.0806 16.9201C14.7206 16.7201 14.3606 16.5601 13.9206 16.3201C13.0406 15.8001 12.1206 15.0801 11.2006 14.2001C10.2806 13.3201 9.56062 12.4001 9.04062 11.5201C8.80062 11.0801 8.64062 10.7201 8.44062 10.3601C8.36062 10.1601 8.40062 9.9201 8.60062 9.7601L9.72062 8.9601C9.92062 8.7601 10.0806 8.7601 10.2406 8.8801C10.4006 9.0001 10.6006 9.2401 10.7606 9.4001C10.9606 9.6001 11.1206 9.8001 11.1606 10.0001C11.2006 10.1601 11.2006 10.3601 11.0806 10.5601L10.9606 10.7601C10.8406 10.9601 10.8006 11.1201 10.8006 11.2801C10.8006 11.4401 10.9206 11.6401 11.0406 11.7601C11.1606 11.8801 11.3606 12.0001 11.4806 12.1201C12.4406 13.0001 13.3606 13.7201 14.1606 14.2801C14.3606 14.4401 14.5606 14.6001 14.7606 14.8001C14.9206 14.9601 15.0806 15.0401 15.2806 15.0401C15.4806 15.0401 15.6806 15.0001 15.8406 14.8801L16.0806 14.7201C16.3206 14.5601 16.5206 14.4801 16.7206 14.5601C16.9206 14.6401 17.0806 14.8001 17.1606 15.0001L17.2406 15.2001C17.3206 15.4001 17.2806 15.6401 17.1606 15.8401L16.4806 15.6801Z"/>
        </svg>
    </a>

    <script>
        // --- DATA PERTANYAAN ---
        // score: 1 = jawaban menunjukkan risiko (positif skrining)
        const questions = [
            { id: 1, text: "Apakah anak Anda tertarik pada anak-anak lain?", risk_answer: "No", user_answer: null },
            { id: 2, text: "Apakah anak Anda menggunakan jari untuk menunjuk (meminta) sesuatu?", risk_answer: "No", user_answer: null },
            { id: 3, text: "Apakah anak Anda meniru Anda (misalnya, melambaikan tangan, menepuk tangan)?", risk_answer: "No", user_answer: null },
            { id: 4, text: "Jika Anda menunjuk suatu objek, apakah anak Anda melihat ke objek tersebut?", risk_answer: "No", user_answer: null },
            { id: 5, text: "Apakah anak Anda bermain pura-pura (misalnya, memberi makan boneka)?", risk_answer: "No", user_answer: null },
            { id: 6, text: "Apakah anak Anda memandang mata Anda selama lebih dari satu atau dua detik?", risk_answer: "No", user_answer: null },
            { id: 7, text: "Apakah anak Anda melakukan gerakan tangan aneh di dekat wajahnya?", risk_answer: "Yes", user_answer: null },
            { id: 8, text: "Apakah anak Anda menggunakan kata-kata tunggal (selain mama/papa)?", risk_answer: "No", user_answer: null },
            { id: 9, text: "Apakah anak Anda sangat peka terhadap suara bising yang biasa?", risk_answer: "Yes", user_answer: null },
            { id: 10, text: "Apakah anak Anda sering menyusun mainan dalam barisan?", risk_answer: "Yes", user_answer: null },
            { id: 11, text: "Apakah anak Anda pernah kehilangan kemampuan bicara atau sosial?", risk_answer: "Yes", user_answer: null },
            { id: 12, text: "Apakah anak Anda menunjukkan minat tidak biasa pada bagian mainan tertentu (misalnya, roda mobil)?", risk_answer: "Yes", user_answer: null },
            { id: 13, text: "Apakah anak Anda sering berputar-putar tanpa alasan yang jelas?", risk_answer: "Yes", user_answer: null },
            { id: 14, text: "Apakah anak Anda membawa benda kepada Anda untuk menunjukkan sesuatu?", risk_answer: "No", user_answer: null },
            { id: 15, text: "Apakah anak Anda merespons ketika Anda memanggil namanya?", risk_answer: "No", user_answer: null },
        ];
        
        // --- STATUS KUIS ---
        let currentQuestionIndex = 0;

        // --- REFERENSI ELEMEN HTML ---
        const questionsContainer = document.getElementById('questionsContainer');
        const screeningForm = document.getElementById('screeningForm');
        const resultContainer = document.getElementById('resultContainer');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const riskLevel = document.getElementById('riskLevel');
        const recommendation = document.getElementById('recommendation');
        const prevButton = document.getElementById('prevButton');
        const nextButton = document.getElementById('nextButton');
        const submitButton = document.getElementById('submitButton');
        const questionCounter = document.getElementById('questionCounter');
        const whatsappButton = document.getElementById('whatsappButton'); 
        
        document.addEventListener('DOMContentLoaded', () => {
            // Inisialisasi: Panggil renderQuestions() agar pertanyaan muncul segera setelah DOM siap.
            renderQuestions(); 
        });

        // --- LOGIKA KUIS ---
        
        // Fungsi untuk menyimpan jawaban saat ini
        function saveAnswer(qId, value) {
            const index = questions.findIndex(q => q.id == qId);
            if (index !== -1) {
                questions[index].user_answer = value;
            }
        }

        // Fungsi untuk menampilkan pertanyaan saat ini
        function renderQuestions() {
            const q = questions[currentQuestionIndex];
            const qId = q.id;

            questionsContainer.innerHTML = `
                <div class="w-full">
                    <!-- Teks Pertanyaan -->
                    <p class="text-xl font-semibold text-gray-100 mb-4">
                        ${qId}. ${q.text}
                    </p>
                    
                    <!-- Opsi Jawaban -->
                    <div class="flex items-center justify-end space-x-3 question-option flex-shrink-0">
                        <!-- Pilihan YA -->
                        <input type="radio" id="q${qId}_yes" name="q${qId}" value="Yes" class="hidden" 
                            ${q.user_answer === 'Yes' ? 'checked' : ''} 
                            onchange="saveAnswer(${qId}, this.value)">
                        <label for="q${qId}_yes" class="text-center py-2 px-4 rounded-lg cursor-pointer transition duration-200 border min-w-[70px]">
                            Ya
                        </label>
                        <!-- Pilihan TIDAK -->
                        <input type="radio" id="q${qId}_no" name="q${qId}" value="No" class="hidden" 
                            ${q.user_answer === 'No' ? 'checked' : ''} 
                            onchange="saveAnswer(${qId}, this.value)">
                        <label for="q${qId}_no" class="text-center py-2 px-4 rounded-lg cursor-pointer transition duration-200 border min-w-[70px]">
                            Tidak
                        </label>
                    </div>
                </div>
            `;
            
            // Perbarui tombol navigasi dan counter
            prevButton.classList.toggle('hidden', currentQuestionIndex === 0);
            
            // Format teks penghitung pertanyaan: "X dari Y"
            questionCounter.textContent = `${currentQuestionIndex + 1} dari ${questions.length}`;

            if (currentQuestionIndex === questions.length - 1) {
                nextButton.classList.add('hidden');
                submitButton.classList.remove('hidden');
            } else {
                nextButton.classList.remove('hidden');
                submitButton.classList.add('hidden');
            }
            
            // Pastikan tombol WA tersembunyi selama kuis berlangsung
            whatsappButton.classList.add('hidden');
        }

        // Fungsi untuk pindah ke pertanyaan berikutnya
        function goToNext() {
            const q = questions[currentQuestionIndex];
            if (q.user_answer === null) {
                showMessageBox("Lengkapi Jawaban", "Anda harus memilih Ya atau Tidak sebelum melanjutkan.");
                return;
            }

            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                renderQuestions();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // Fungsi untuk pindah ke pertanyaan sebelumnya
        function goToPrevious() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestions();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // Fungsi untuk menghitung skor dan menampilkan hasil
        function calculateScore() {
            const q = questions[currentQuestionIndex];
            if (q.user_answer === null) {
                showMessageBox("Lengkapi Jawaban", "Anda harus memilih Ya atau Tidak sebelum melihat hasil.");
                return;
            }
            
            let score = 0;
            questions.forEach(q => {
                if (q.user_answer === q.risk_answer) {
                    score++;
                }
            });

            // Tentukan Level Risiko
            let riskText = "";
            let riskColor = "";
            let recommendationText = "";

            if (score >= 8) {
                riskText = "Risiko Tinggi";
                riskColor = "bg-red-600 text-white";
                recommendationText = `Anak Anda mencetak ${score} dari ${questions.length}. Hasil ini menunjukkan <strong>Risiko Tinggi</strong>. Sangat dianjurkan untuk segera mencari evaluasi komprehensif dari profesional perkembangan anak (Spesialis Anak atau Psikolog Klinis).`;
            } else if (score >= 4) {
                riskText = "Risiko Sedang";
                riskColor = "bg-yellow-600 text-yellow-100";
                recommendationText = `Anak Anda mencetak ${score} dari ${questions.length}. Hasil ini menunjukkan <strong>Risiko Sedang</strong>. Disarankan untuk menindaklanjuti dengan dokter anak atau melakukan observasi perilaku lebih lanjut.`;
            } else {
                riskText = "Risiko Rendah";
                riskColor = "bg-green-600 text-white";
                recommendationText = `Anak Anda mencetak ${score} dari ${questions.length}. Hasil ini menunjukkan <strong>Risiko Rendah</strong>. Meskipun demikian, terus pantau perkembangan anak Anda. Jika ada kekhawatiran, konsultasikan dengan profesional.`;
            }

            // Tampilkan Hasil
            scoreDisplay.textContent = `${score} / ${questions.length}`;
            riskLevel.className = `text-center text-2xl font-semibold p-4 rounded-lg mb-6 ${riskColor}`;
            riskLevel.textContent = riskText;
            recommendation.innerHTML = recommendationText;

            screeningForm.classList.add('hidden');
            resultContainer.classList.remove('hidden');

            // --- Logika Tombol WA ---
            const finalScore = score;
            const waMessage = `Halo, saya ingin berkonsultasi mengenai hasil skrining dini autisme anak saya. Skor risiko yang didapat adalah ${finalScore} dari ${questions.length}, dengan tingkat risiko ${riskText}. Mohon petunjuk selanjutnya.`;
            const encodedMessage = encodeURIComponent(waMessage);
            const phoneNumber = '6285119888882'; // Nomor WA dengan kode negara Indonesia (62)

            whatsappButton.href = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;
            whatsappButton.classList.remove('hidden'); // Tampilkan tombol WA setelah hasil

            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Fungsi untuk mengulang kuis
        function resetQuiz() {
            questions.forEach(q => q.user_answer = null); // Reset all answers
            currentQuestionIndex = 0;
            renderQuestions();
            resultContainer.classList.add('hidden');
            screeningForm.classList.remove('hidden');
            whatsappButton.classList.add('hidden'); // Sembunyikan tombol WA saat kuis diulang
        }

        // --- MODAL PESAN KUSTOM (Pengganti alert) ---
        function showMessageBox(title, message) {
            let modal = document.getElementById('customModal');
            if (!modal) {
                modal = document.createElement('div');
                modal.id = 'customModal';
                modal.className = 'fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50 hidden';
                modal.innerHTML = `
                    <div class="dark-card rounded-lg shadow-xl w-full max-w-sm p-6 transform transition-all duration-300 scale-95">
                        <h3 id="modalTitle" class="text-xl font-bold mb-3 text-red-400"></h3>
                        <p id="modalMessage" class="mb-5 text-gray-300"></p>
                        <button id="modalClose" class="w-full dark-accent-button py-2 rounded-lg font-semibold">Tutup</button>
                    </div>
                `;
                document.body.appendChild(modal);
                document.getElementById('modalClose').onclick = () => modal.classList.add('hidden');
            }

            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalMessage').textContent = message;
            modal.classList.remove('hidden');
        }
    </script>
</body>
</html>
